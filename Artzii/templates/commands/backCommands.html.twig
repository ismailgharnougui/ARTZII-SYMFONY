{% extends 'baseBackCommand.html.twig' %}


{% block body %}


	<!-- ======= main ======= -->
	<main id="main" class="main">

		<div class="pagetitle">
			<h1>Data Tables</h1>
			<nav>
				<ol class="breadcrumb">
					<li class="breadcrumb-item">
						<a href="index.html">Home</a>
					</li>
					<li class="breadcrumb-item">Tables</li>
					<li class="breadcrumb-item active">Data</li>
				</ol>
			</nav>
		</div>
		<!-- End Page Title -->

		<section class="section">
			<div class="row">
				<div class="col-lg-12">

					<div class="card">
						<div class="card-body">
							<h5 class="card-title">Les commandes</h5>
							<p>Bienvenue dans l'interface de gestion des commandes, vous êtes maintenant aux commandes !
							</p>

							<!-- Table with stripped rows -->
							<table class="table table-striped datatable">
								<thead>
									<tr>
										<th scope="col">Nom et Prénom</th>
										<th scope="col">Adresse</th>
										<th scope="col">Date commande</th>
										<th scope="col">Mode paiement</th>
										<th scope="col">Coût totale</th>
										<th scope="col">Status</th>
										<th scope="col">Actions</th>
									</tr>
								</thead>
								<tbody>
									{% for command in commands %}
										<tr>
											<td scope="row">{{command.idClient.getNomu}}
												{{command.idClient.getPrenomu}}</td>
											<td>{{command.adresse}}</td>
											<td>{{command.dateCommande | date('Y-m-d')}}</td>
											<td>{{command.modePaiement}}</td>
											<td>{{command.coutTotale}} DT</td>
											<td >
												{% set status = command.etatCommande  %}

												<select id="EtatCommand">
													{% if status == 'En cours' %}
														<option value="En cours" selected >
															<span class="badge bg-primary">En cours</span>
														</option>
													{% else  %}
														<option value="En cours">En cours</option>
													{% endif %}

													{% if status == 'En attente' %}
														<option value="En attente" selected>
															<span class="badge bg-warning">En attente</span>
														</option>
													{% else  %}
														<option value="En attente">
															<span class="badge bg-warning">En attente</span>
														</option>
													{% endif %}

													{% if status == 'Livré' %}

														<option value="Livré" selected>
															<span class="badge bg-success">Livré</span>
														</option>
													{% else  %}
														<option value="Livré">
															<span class="badge bg-success">Livré</span>
														</option>
													{% endif %}
													{% if status == 'Annulé' %}

														<option value="Annulé" selected>
															<span class="badge bg-danger">Annulé</span>
														</option>
													{% else  %}
														<option value="Annulé">
															<span class="badge bg-danger">Annulé</span>
														</option>
													{% endif %}

												</select> 
												
											</td>

											<td>

											    <a href="#">
													<img src="{{asset('assets/images/editBlack.png')}}" alt="modifier" width="24px">
												</a> 

												

												<a href="{{ path('app_removeCommand', {'idCommand': command.getId()} ) }}">
													<img src="{{asset('assets/images/trash.png')}}" alt="supprimer" width="39px" style="margin-left: -8px;">
												</a>
												<a href="{{path('app_afficheCommandAdmin',{'idCommand':command.id})}}">
													<img src="{{ asset('assets/images/detailspng.png') }}" alt="eye" width="27px" style="margin-left:-6px;">
												</a>




											</td>
										</tr>
									{% endfor %}

								</tbody>
							</table>
							<!-- End Table with stripped rows -->

						</div>
					</div>

				</div>
			</div>
		</section>

	</main>

	<!-- End #main -->


{% endblock %}


{% block javascripts %}
<script>

  var selectElement = document.getElementById("EtatCommand");
  var hiddenInputElement = document.getElementById("selected-fruit");
  
  // Update the hidden input field with the selected value whenever the selection changes
  selectElement.addEventListener("change", function() {
    // hiddenInputElement.value = selectElement.value;
     var selectedOption = selectElement.options[selectElement.selectedIndex];
     hiddenInputElement.value = ""+selectedOption.value;
  });


</script>
{% endblock %}
